---
- name: "clone git repo and checkout PR's head"
  git:
    repo: "{{ git_repo }}"
    dest: /root/freeipa
    version: "{{ git_version | default('pr_head') }}"
    refspec: "pull/{{ git_pr }}/head:pr_head"
    force: yes
  when: git_pr is defined

- name: "checkout git repo and checkout version"
  git:
    repo: "{{ git_repo }}"
    dest: /root/freeipa
    version: "{{ git_version | default('master') }}"
    force: yes
  when: git_pr is undefined

